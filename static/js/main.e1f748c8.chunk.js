(this["webpackJsonproundtrip-react-challenge"]=this["webpackJsonproundtrip-react-challenge"]||[]).push([[0],{26:function(e,a,n){e.exports=n(35)},35:function(e,a,n){"use strict";n.r(a);n(27);var t=n(0),c=n.n(t),r=n(14),o=n.n(r),l=n(11),i=n(12),s=n(25),u=n(24),d=function(e){Object(s.a)(n,e);var a=Object(u.a)(n);function n(){return Object(l.a)(this,n),a.apply(this,arguments)}return Object(i.a)(n,[{key:"getUnmatchedPlan",value:function(e){return this._fetch({endpoint:"unmatched-plans/".concat(e),method:"GET"})}},{key:"getMasterPlans",value:function(){return this._fetch({endpoint:"master-plans",method:"GET"})}},{key:"addAlias",value:function(e){return this._fetch({endpoint:"aliases",method:"POST",data:e})}},{key:"addMasterPlan",value:function(e){return this._fetch({endpoint:"master-plans",method:"POST",data:e})}}]),n}(function(){function e(a){Object(l.a)(this,e),this.baseUrl=void 0,this.baseUrl=a}return Object(i.a)(e,[{key:"log",value:function(e){0}},{key:"_fetch",value:function(e){var a=this,n={method:e.method};return"POST"!==e.method&&"PUT"!==e.method&&"PATCH"!==e.method||(n.headers={"Content-Type":"application/json"},n.body=JSON.stringify(e.data)),this.log("\n    ---- REQUEST ----\n    url: ".concat(this.baseUrl,"/").concat(e.endpoint,"\n    method: ").concat(e.method,"\n    data: ").concat(e.data?JSON.stringify(e.data,null,2):"N/A","\n    ")),fetch("".concat(this.baseUrl,"/").concat(e.endpoint),n).then((function(e){return e.json()})).then((function(e){return a.log("\n        ---- RESPONSE ----\n        response: ".concat(JSON.stringify(e,null,2),"\n        ")),e}))}}]),e}()),m=n(23),h=n(6),p=n(8),b=n(22),f=function(){function e(a){Object(l.a)(this,e),this.api=void 0,this.api=a.api}return Object(i.a)(e,null,[{key:"set",value:function(e){void 0===this.current&&(this.current=new this(e))}}]),e}();f.current=void 0;var v,y=n(16),E=function(e){return t.createElement(y.a,{show:e.show,onClose:e.onClose,delay:3e3,autohide:!0},t.createElement(y.a.Header,null,t.createElement("strong",{className:"mr-auto"},e.type)),t.createElement(y.a.Body,null,e.message))},g=t.useEffect,O=t.useState,j=n(19),P=n(17),w=n(15),_=n(7),C={PayerForm:(v=function(e){var a,n,c,r,o,l;return t.createElement(t.Fragment,null,t.createElement("h2",null,null===(a=e.unmatchedPlan)||void 0===a?void 0:a.carrier_name," ",null===(n=e.unmatchedPlan)||void 0===n?void 0:n.plan_name),t.createElement(P.a,null,t.createElement(_.a,{className:"mb-3"},t.createElement(_.a.Prepend,null,t.createElement(_.a.Text,{id:"carrier-and-plan-name"},"Carrier and plan name:")),t.createElement(w.a,{"aria-label":"Carrier and plan name","aria-describedby":"carrier-and-plan-name",type:"text",value:"".concat(null===(c=e.unmatchedPlan)||void 0===c?void 0:c.carrier_name," ").concat(null===(r=e.unmatchedPlan)||void 0===r?void 0:r.plan_name),readOnly:!0})),t.createElement(_.a,{className:"mb-3"},t.createElement(_.a.Prepend,null,t.createElement(_.a.Text,{id:"company-id"},"Company Id:")),t.createElement(w.a,{"aria-label":"Company Id","aria-describedby":"company-id",type:"text",value:null===(o=e.unmatchedPlan)||void 0===o?void 0:o.company_id,readOnly:!0})),t.createElement(_.a,{className:"mb-3"},t.createElement(_.a.Prepend,null,t.createElement(_.a.Text,{id:"company-phone"},"Phone number:")),t.createElement(w.a,{"aria-label":"Phone number","aria-describedby":"company-phone",type:"text",value:null===(l=e.unmatchedPlan)||void 0===l?void 0:l.company_phone,readOnly:!0})),t.createElement(P.a.Group,null,t.createElement(P.a.Control,{as:"select",value:e.selectedMatch,onChange:e.handleSelectMatch},t.createElement("option",{value:""},"Select"),e.masterPlans.map((function(e){return t.createElement("option",{key:e.id,value:e.id},e.name)})))),t.createElement(j.a,{variant:"light",disabled:e.matchDisabled||e.matchLoading,style:{marginRight:"1rem"},onClick:e.handleClickMatch},e.matchLoading?"Loading...":"Match"),t.createElement(j.a,{variant:"primary",disabled:e.createInsuranceLoading,onClick:e.handleClickCreateInsurance},e.createInsuranceLoading?"Loading...":"Create Insurance")))},function(){var e=function(e,a){if(e>=a)throw new Error("The first argument must be less than the second argument.");return Math.floor(Math.random()*(a-e+1))+e}(1,4),a=f.current.api,n=O(!1),c=Object(p.a)(n,2),r=c[0],o=c[1],l=O(""),i=Object(p.a)(l,2),s=i[0],u=i[1],d=O([]),m=Object(p.a)(d,2),y=m[0],j=m[1],P=O(),w=Object(p.a)(P,2),_=w[0],C=w[1],k=O(!1),S=Object(p.a)(k,2),T=S[0],M=S[1],N=O(!1),I=Object(p.a)(N,2),L=I[0],U=I[1],x=O(!1),J=Object(p.a)(x,2),A=J[0],F=J[1],B=O({type:void 0,message:void 0,show:!1,onClose:function(){D(Object(h.a)(Object(h.a)({},R),{},{show:!1}))}}),G=Object(p.a)(B,2),R=G[0],D=G[1];return g((function(){o(!0),Promise.all([a.getMasterPlans(),a.getUnmatchedPlan(e)]).then((function(e){var a=Object(p.a)(e,2),n=a[0],t=a[1];j(n),C(t)})).catch((function(e){D(Object(h.a)(Object(h.a)({},R),{},{type:"Error",message:e,show:!0}))})).finally((function(){return o(!1)}))}),[]),g((function(){M(""===s)}),[s]),r?t.createElement(b.a,{animation:"border",role:"status"},t.createElement("span",{className:"sr-only"},"Loading...")):t.createElement(t.Fragment,null,t.createElement(E,R),t.createElement(v,{masterPlans:y,matchDisabled:T,matchLoading:L,createInsuranceLoading:A,unmatchedPlan:_,selectedMatch:s,handleSelectMatch:function(e){return u(e.target.value)},handleClickMatch:function(){U(!0),a.addAlias({plan_name:null===_||void 0===_?void 0:_.plan_name,carrier_name:null===_||void 0===_?void 0:_.carrier_name,unmatched_plan_id:null===_||void 0===_?void 0:_.id,master_plan_id:Number(s)}).then((function(){D(Object(h.a)(Object(h.a)({},R),{},{type:"Success",message:"Your match has been submitted.",show:!0}))})).catch((function(e){D(Object(h.a)(Object(h.a)({},R),{},{type:"Error",message:e,show:!0}))})).finally((function(){U(!1)}))},handleClickCreateInsurance:function(){F(!0),_?a.addMasterPlan({name:"".concat(null===_||void 0===_?void 0:_.carrier_name," ").concat(null===_||void 0===_?void 0:_.plan_name)}).then((function(){D(Object(h.a)(Object(h.a)({},R),{},{type:"Success",message:"Insurance successfully created.",show:!0}))})).catch((function(e){D(Object(h.a)(Object(h.a)({},R),{},{type:"Error",message:e,show:!0}))})).finally((function(){F(!1)})):D(Object(h.a)(Object(h.a)({},R),{},{type:"Error",message:"The form is incomplete",show:!0}))}}))})},k=function(){return t.createElement(m.a,{style:{marginTop:"2rem"}},t.createElement(C.PayerForm,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));f.set({api:new d("https://roundtrip-api-jp.herokuapp.com")}),o.a.render(c.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[26,1,2]]]);
//# sourceMappingURL=main.e1f748c8.chunk.js.map